import Head from "next/head";
import Image from "next/image";
import Link from "next/link";
import { ImageContainer, Logo, SingleStoreCard } from "../components/elements";
import { signIn, signOut } from "next-auth/react";
import prisma from "../utils/prismadb.js";
import {
  GuestFeaturedStores,
  GuestFeatures,
  GuestHero,
} from "./../components/sections/guest";

import { useSession } from "next-auth/react";

export default function Home({ stores }) {
  const { data: session } = useSession();
  console.log(session);
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="container mx-auto px-6 space-y-10">
        <button onClick={() => signIn()}> sign in</button>
        <button onClick={() => signOut()}> sign out</button>
        <GuestHero />
        <GuestFeatures />
        <GuestFeaturedStores stores={stores} />
      </main>
    </>
  );
}
export async function getServerSideProps() {
  const stores = await prisma.store.findMany({});

  return {
    props: {
      stores: JSON.parse(JSON.stringify(stores)),
    },
  };
}
